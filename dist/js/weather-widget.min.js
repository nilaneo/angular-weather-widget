!function(){"use strict";angular.module("nnWeather",[]).factory("nnWeatherService",["$http",function(a){function b(b){return a.get("http://api.openweathermap.org/data/2.5/forecast/daily",{params:{q:b,units:"metric",cnt:7}}).then(function(a){return c(a.data)})}function c(a){return{cityName:a.city.name,forecast:a.list.map(d)}}function d(a){return{day:e(1e3*a.dt),minTemp:a.temp.min,maxTemp:a.temp.max,dayTemp:a.temp.day,iconClass:f(a.weather[0].icon)}}function e(a){return new Date(a).toString().match(/^\w*/)[0]}function f(a){switch(a){case"01d":case"01n":return"nn-icon-clear-sky";case"02d":case"02n":return"nn-icon-few-clouds";case"03d":case"03n":return"nn-icon-scattered-clouds";case"04d":case"04n":return"nn-icon-broken-clouds ";case"09d":case"09n":return"nn-icon-shower-rain ";case"10d":case"10n":return"nn-icon-rain";case"11d":case"11n":return"nn-icon-thunderstorm";case"13d":case"13n":return"nn-icon-snow";case"50d":case"50n":return"nn-icon-mist";default:return""}}return{getForecast:b}}]).directive("nnWeatherWidget",[function(){return{scope:{city:"@"},templateUrl:"../dist/templates/weather-widget.tpl.min.html",controller:["$scope","nnWeatherService",function(a,b){a.cityName=null,a.forecast=null,b.getForecast(a.city).then(function(b){a.cityName=b.cityName,a.forecast=b.forecast})}]}}])}();